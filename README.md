# Git Repository Visualization

A specialized visualization tool designed to analyze the lifecycle, social structure, and temporal evolution of Git repositories. This project renders complex Git history data into interactive dashboards, running entirely client-side using pre-processed JSON datasets.

![Status](https://img.shields.io/badge/Status-Active_Development-blue)
![Tech](https://img.shields.io/badge/Stack-React_|_TypeScript_|_D3-purple)
![Phase](https://img.shields.io/badge/Phase-3_Complete-green)

## ğŸ”­ Project Overview

This application serves as an interactive explorer for Git repository data. It allows developers and analysts to understand how a codebase has evolved over time, identifying hotspots of activity, author collaboration patterns, and structural changes.

The project is built on a **Plugin Architecture**, allowing different visualization modules to be registered and rendered dynamically. The system is designed for rapid plugin development - new visualizations can be added in **under 1 hour** using the declarative data loading pattern.

## âœ¨ Key Features

### 1. Timeline Heatmap (Primary Visualization)

A highly interactive, temporal grid that visualizes activity across the directory structure.

- **Temporal Navigation:** Group activity by Day, Week, Month, Quarter, or Year.
- **Metric Switching:** Visualize by Commits, File Events, or Active Authors.
- **Deep Inspection:** Click any cell to open a Detail Panel showing specific file operations, top contributors, and event composition (Adds/Mods/Deletes).
- **Advanced Filtering:** Slice data by Author, File Type, or specific sub-directories.
- **V2 Enhancements:** Enriched cell details with file metadata and primary author statistics.

### 2. Treemap Structure

A hierarchical view of the repository's file structure.

- _Current Status:_ Registered and displays static directory layout.
- _Next Phase:_ Will be activated with interactive drill-down using declarative data loading (Phase 4).

## ğŸ› ï¸ Technical Architecture

- **Frontend Framework:** React 18 with TypeScript and Vite.
- **State Management:** Zustand for global state and filter propagation.
- **Visualization Engine:**
  - Custom DOM-based rendering for the high-performance Heatmap grid.
  - D3.js for hierarchical calculations and Treemap rendering.
- **Styling:** Tailwind CSS for a responsive, dark-mode UI.

### Data Strategy (Zero-Backend)

The application runs without a dedicated API server. Instead, it consumes static JSON datasets generated by an external analysis pipeline.

**Declarative Data Loading** (V2.X Architecture):
- Plugins declare their data requirements in metadata (e.g., "I need `temporal_daily` and `author_network`").
- The `PluginDataLoader` intelligently fetches only the required JSON files.
- `DataProcessor` handles raw data transformation into optimized structures.
- Automatic caching reduces redundant network requests.

**Available Datasets:**
- **Time Series:** `temporal_daily`, `temporal_weekly`, `temporal_monthly`, `temporal_quarterly`, `temporal_yearly`
- **Core Data:** `file_lifecycle`, `file_index`
- **Hierarchy:** `directory_stats`
- **Networks:** `author_network`, `cochange_network`
- **Snapshots:** `release_snapshots`

All 11 V2 datasets are cataloged in the `DatasetRegistry` with metadata, type classification, and validation utilities.

## ğŸš€ Getting Started

### Prerequisites

- Node.js (v18+)
- npm or pnpm

### Installation

1.  **Install dependencies:**

    ```bash
    npm install
    # or
    pnpm install
    ```

2.  **Start the development server:**

    ```bash
    npm run dev
    # or
    pnpm run dev
    ```

3.  **Open the application:**
    Navigate to `http://localhost:5173` in your browser.

## ğŸ“ Project Structure

```
src/
â”œâ”€â”€ components/         # Shared UI components (Filters, Selectors, Panels)
â”œâ”€â”€ hooks/              # Custom hooks (Scroll handling, Resize logic)
â”œâ”€â”€ plugins/            # Visualization Plugin System
â”‚   â”œâ”€â”€ core/           # Registry & Interfaces with data validation
â”‚   â”œâ”€â”€ timeline-heatmap/ # The interactive heatmap implementation
â”‚   â””â”€â”€ treemap-animation/ # The structural treemap implementation
â”œâ”€â”€ services/           # Data fetching & schema parsing
â”‚   â””â”€â”€ data/           # Plugin-aware data loading infrastructure
â”‚       â”œâ”€â”€ DataProcessor.ts    # Raw data transformation logic
â”‚       â”œâ”€â”€ DatasetRegistry.ts  # Central dataset catalog
â”‚       â”œâ”€â”€ PluginDataLoader.ts # Cache-aware loader
â”‚       â””â”€â”€ __tests__/          # Data infrastructure tests
â”œâ”€â”€ store/              # Global state management
â”œâ”€â”€ types/              # Domain & Visualization type definitions
â”‚   â”œâ”€â”€ plugin.ts       # Enhanced plugin types with data requirements
â”‚   â””â”€â”€ ...
â””â”€â”€ utils/              # Helper functions
```

## ğŸ†• Recent Development (V2.X Architecture)

### Phase 3: Timeline Heatmap Refactor (âœ… Complete - January 2026)

**Migration to Declarative Loading:**
- The Timeline Heatmap now explicitly declares its data requirements in `TimelineHeatmapPlugin.ts`.
- `App.tsx` dynamically loads data based on the active plugin's manifest.
- Data processing logic extracted from the legacy loader into a reusable `DataProcessor`.
- **Result:** The application no longer blindly loads all data on startup; it loads only what the active plugin needs.

### Phase 2: Enhanced Plugin Manifest (âœ… Complete - January 2026)

**Plugin Architecture Enhancement:**
- Plugins now support **declarative data requirements** in metadata.
- Built-in validation ensures required datasets are available.
- Transform functions allow preprocessing data before plugin receives it.

### Phase 1: Data Infrastructure Foundation (âœ… Complete - January 2026)

**New Data Services** (`/src/services/data/`)
- **DatasetRegistry**: Central catalog of all V2 datasets with metadata and validation.
- **PluginDataLoader**: Cache-aware loading with declarative requirements support.

## ğŸ“Š Development Status

### Current Capabilities âœ…

- âœ… Timeline Heatmap fully functional using `PluginDataLoader`
- âœ… Plugin architecture with declarative data requirements
- âœ… DatasetRegistry with 11 V2 datasets
- âœ… Plugin validation and health checking
- âœ… Comprehensive plugin development documentation

### Roadmap ğŸ“…

1. **Phase 4: Activate Treemap** (Next - 4-7 hours)
   - Wire Treemap to use declarative data loading
   - Activate interactive features
   - Demonstrate scalability of plugin pattern

2. **Phase 5: Plugin State Management** (6-10 hours)
   - Extract plugin-scoped state patterns
   - Prevent state pollution between plugins
   - Enable plugin-specific persistence

3. **Phase 6: Manifest-Driven Discovery** (3-4 hours)
   - Parse manifest.json for dataset metadata
   - Dynamic plugin-dataset discovery
   - Automated validation workflows

4. **Phase 7: Third Visualization** (< 4 hours target)
   - Prove system maturity by adding new viz rapidly
   - Validate < 1 hour plugin development goal
   - Options: Author network, temporal line chart, or file churn heatmap

## ğŸ§ª Development

### Type Checking

```bash
npm run type-check
```

### Running Tests

```bash
npm test

# Run specific test suite
npm test src/plugins/core/__tests__/PluginRegistry.test.ts
```

### Validating Plugin System (Dev Console)

```javascript
// After app loads, in browser console:

// List available datasets
DatasetRegistry.listAvailable()

// Validate all plugins
await PluginRegistry.validateAllPlugins()

// Get system summary
PluginRegistry.getDataRequirementsSummary()

// Check specific plugin
PluginRegistry.getDataRequirements('timeline-heatmap')
```

## ğŸ“– Documentation

- **[README.md](README.md)** - This file (project overview)
- **[docs/PLUGIN_TEMPLATE.md](docs/PLUGIN_TEMPLATE.md)** - Plugin development guide
- **[PHASE_2_COMPLETE.md](PHASE_2_COMPLETE.md)** - Phase 2 implementation details
- **[src/services/data/README.md](src/services/data/README.md)** - Data infrastructure docs

## ğŸ”§ Creating a New Plugin

With the V2.X architecture, creating a new plugin takes **< 1 hour**:

```typescript
// 1. Define your plugin with data requirements
export class MyPlugin implements VisualizationPlugin {
  metadata = {
    id: "my-plugin",
    name: "My Visualization",
    description: "What this plugin does",
    version: "1.0.0",
    priority: 3,
    dataRequirements: [
      {
        dataset: "temporal_monthly",  // From DatasetRegistry
        required: true,
        alias: "monthly"
      }
    ]
  };

  defaultConfig = { /* your config */ };

  init(container) { /* setup */ }
  processData(dataset) { /* transform */ }
  render(data, config) { /* visualize */ }
  update(data, config) { /* update */ }
  destroy() { /* cleanup */ }
  exportImage() { /* export */ }
  exportData() { /* export */ }
}

// 2. Register the plugin
import { PluginRegistry } from "@/plugins/core/PluginRegistry";
PluginRegistry.register(new MyPlugin());

// 3. Validate it works
const validation = await PluginRegistry.validateDataAvailability("my-plugin");
console.log(validation.valid ? "âœ“ Ready" : "âœ— Missing data");
```

See `docs/PLUGIN_TEMPLATE.md` for complete guide with examples.

## ğŸ¤ Contributing

This project is actively being refactored to support a more extensible plugin system. Current development follows a phased approach:

1. âœ… **Phase 1:** Data Infrastructure Foundation (Complete)
2. âœ… **Phase 2:** Enhanced Plugin Manifest (Complete)
3. âœ… **Phase 3:** Timeline Heatmap Refactor (Complete)
4. ğŸ”„ **Phase 4:** Treemap Activation (Next)
5. ğŸ“… **Phase 5:** Plugin State Management
6. ğŸ“… **Phase 6:** Manifest-Driven Discovery
7. ğŸ“… **Phase 7:** Third Visualization (Maturity Test)

### Contributing Guidelines

- All plugins must declare data requirements in metadata
- Use `PluginDataLoader` for data loading
- Add tests for new plugins
- Update documentation for new features
- Ensure TypeScript strict mode compliance

### Testing Your Changes

```bash
# Type check
pnpm run type-check

# Run tests
pnpm test

# Validate plugins
pnpm run dev
# Then in console: await PluginRegistry.validateAllPlugins()
```

## ğŸ¯ Design Principles

1. **Zero Breaking Changes:** All refactoring preserves existing functionality
2. **Declarative Over Imperative:** Plugins declare needs, framework handles loading
3. **Fail-Safe Defaults:** Optional datasets allow graceful degradation
4. **Validation First:** Catch missing data at startup, not during render
5. **Speed Matters:** New plugins should take < 1 hour from idea to working viz

## ğŸ› Troubleshooting

### Plugin Not Appearing

```typescript
// Check if plugin is registered
PluginRegistry.has("my-plugin-id") // Should return true

// Check priority sorting
PluginRegistry.getAll().map(p => ({ id: p.metadata.id, priority: p.metadata.priority }))
```

### Data Not Loading

```typescript
// Validate dataset exists
DatasetRegistry.has("my-dataset") // Should return true

// Validate plugin requirements
const validation = await PluginRegistry.validateDataAvailability("my-plugin")
console.log(validation) // Check errors/warnings
```

### TypeScript Errors

```bash
# Ensure all types are exported
grep "export.*Plugin" src/types/plugin.ts

# Check path aliases in vite.config.ts
# Should include: alias: { '@': path.resolve(__dirname, './src') }
```

## ğŸ“„ License

[Add license information here]

## ğŸ™ Acknowledgments

- Built with React, TypeScript, D3.js, and Vite
- Visualizations inspired by software archaeology and repository mining research
- Plugin architecture enables rapid experimentation with Git data visualizations

---

**Status:** Phase 3 complete. Treemap Activation (Phase 4) is next.  
**Current Plugins:** Timeline Heatmap (active, v2-ready), Treemap (registered, awaiting Phase 4)  
**Plugin Development Time:** < 1 hour (target achieved with V2.X architecture)
